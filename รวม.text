HTML =[
______________________________________________________________________________
index.html
<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
<title>‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ‡∏ü‡∏≠‡∏ô‡∏ï‡πå */
body {
  font-family: "Kanit", sans-serif;
  background: #f5f7fa;
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding-top: 70px;
}

/* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏Å */
.container {
  width: 420px;
  background: #ffffff;
  padding: 25px;
  border-radius: 12px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.15);
  text-align: center;
}

h2 { color: #002b6b; font-weight: 700; margin-bottom: 10px; }

/* ‡∏õ‡∏∏‡πà‡∏° */
.year-btn, .month-btn, .day-btn {
  padding: 8px;
  margin: 3px;
  border: 1px solid #d1d9e6;
  border-radius: 8px;
  background: #fff;
  cursor: pointer;
  transition: .2s;
}

.month-btn.active { background:#004aad; color:white; border-color:#003c94; }
.month-btn.month-has-event { background:#FFE08A; border-color:#FFB400; font-weight:600; }

.day-btn.active {
  background:#FFD700;
  color:black;
  border-color:#b38c00;
  font-weight:600;
}

/* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° */
#eventInfo {
  margin-top: 15px;
  padding: 12px;
  background: #f1f4ff;
  border-left:5px solid #002b6b;
  border-radius:8px;
  font-size:15px;
}

/* ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô */
#registerBtn {
  margin-top: 10px;
  background:#007bff;
  color:white;
  padding:10px;
  border:none;
  border-radius:8px;
  cursor:pointer;
}
#registerBtn:hover { background:#005fcc; }

.logo-school { width: 50px; height:auto; margin-left:10px; }
.Font { font-size: 26px; color:white !important; font-weight: 600; }

@media (max-width:600px) {
  .container { width:100%; border-radius:0; box-shadow:none; }
}
/* ‚úÖ ‡πÄ‡∏ß‡πâ‡∏ô‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Navbar ‡∏Å‡∏±‡∏ö‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô */
.main-container {
  margin-top: 120px; /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏ï‡∏≤‡∏°‡∏Ç‡∏ô‡∏≤‡∏î Navbar ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì (‡∏õ‡∏Å‡∏ï‡∏¥ 80‚Äì120px ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏µ) */
}

</style>

<script src="storage.js"></script>
<script src="auth.js"></script>

</head>

<body>

<!-- Navbar -->
<nav class="navbar navbar-dark bg-dark fixed-top">
  <div class="container-fluid">

    <!-- ‡πÇ‡∏•‡πÇ‡∏Å‡πâ + ‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö -->
    <div class="Font">
      <img src="img/‡∏ï‡∏£‡∏≤.png" class="logo-school">
      ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô
    </div>

    <!-- ‡∏õ‡∏∏‡πà‡∏° Login / Logout + ‡πÄ‡∏°‡∏ô‡∏π 3 ‡∏Ç‡∏µ‡∏î -->
    <div class="d-flex align-items-center">
      <span id="userText" class="text-white me-2"></span>

      <!-- ‡∏õ‡∏∏‡πà‡∏° Login -->
      <button id="loginBtn" class="btn btn-success btn-sm">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>

      <!-- ‡∏õ‡∏∏‡πà‡∏° 3 ‡∏Ç‡∏µ‡∏î (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏≠‡∏ô Login) -->
      <button class="navbar-toggler" id="menuBtn" style="display:none;"
        type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDarkNavbar">
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>

    <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡πâ‡∏≤‡∏á -->
    <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasDarkNavbar">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
      </div>

      <div class="offcanvas-body">

        <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">

          <li class="nav-item">
            <a class="nav-link active">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</a>
          </li>

          <ol class="list-group list-group-numbered">

            <li class="list-group-item d-flex justify-content-between align-items-start">
              <div class="ms-2 me-auto">
                <div class="fw-bold">‡∏Ç‡∏≤‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</div>
                ‡∏Ç‡∏≤‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î : <span id="missCount">0</span>
              </div>
            </li>

            <li class="list-group-item d-flex justify-content-between align-items-start">
              <div class="ms-2 me-auto">
                <div class="fw-bold">‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</div>
                ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î : <span id="joinCount">0</span>
              </div>
            </li>

            <li class="list-group-item d-flex justify-content-between align-items-start">
              <div class="ms-2 me-auto">
                <div class="fw-bold">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏∞‡∏™‡∏°/‡πÅ‡∏ï‡πâ‡∏°‡∏™‡∏∞‡∏™‡∏°</div>
                ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏∞‡∏™‡∏° : <span id="pointCount">0</span>
              </div>
            </li>

            <li class="nav-item mt-2">
              <a class="nav-link" href="tam.html">‡πÅ‡∏•‡∏Å‡πÅ‡∏ï‡πâ‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏¥‡∏ï‡∏û‡∏¥‡∏™‡∏±‡∏¢</a>
            </li>
            <li class="nav-item">
              <a id="logoutBtn" class="nav-link" href="#">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
            </li>
          </ol>
        </ul>
      </div>
    </div>
  </div>
</nav>
<br>
<br>
<br>
<br>
<br>

<!-- ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° -->
<div class="container main-container">

<h2>‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÅ‡∏•‡∏∞‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°</h2>

<div class="calendar-header">
  <button class="year-btn" onclick="changeYear(-1)">‚óÄ ‡∏õ‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß</button>
  <span id="yearDisplay"></span>
  <button class="year-btn" onclick="changeYear(1)">‡∏õ‡∏µ‡∏´‡∏ô‡πâ‡∏≤ ‚ñ∂</button>
</div>


<div id="monthsContainer"></div>
<div id="daysContainer"></div>

<div id="eventInfo">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</div>

<button id="registerBtn" style="display:none" onclick="registerEvent()">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</button>

</div>

<script src="storage.js"></script>
<script src="calendar.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

<script>
if(!localStorage.getItem("student")){
  document.getElementById("registerBtn").style.display = "none";
}

function updateLoginUI(){
  const user = localStorage.getItem("student");
  const loginBtn = document.getElementById("loginBtn");
  const logoutBtn = document.getElementById("logoutBtn");
  const menuBtn = document.getElementById("menuBtn");

  if(user){
    document.getElementById("userText").innerText = "üëã " + user;
    loginBtn.style.display = "none";
    logoutBtn.style.display = "inline-block";
    menuBtn.style.display = "inline-block";

    updateStats();
  } else {
    document.getElementById("userText").innerText = "";
    loginBtn.style.display = "inline-block";
    logoutBtn.style.display = "none";
    menuBtn.style.display = "none";
  }
}

function updateStats(){
  const user = localStorage.getItem("student");
  const regs = JSON.parse(localStorage.getItem("registrations") || "{}");
  const missed = JSON.parse(localStorage.getItem("missedEvents") || "{}");

  let joinCount = 0;
  Object.keys(regs).forEach(date=>{
    regs[date].forEach(r=>{
      if(r.startsWith(user + "_")) joinCount++;
    });
  });

  let missCount = Object.keys(missed).filter(k => k.startsWith(user + "_")).length;
  let points = joinCount * 0.5;

  // <-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏ï‡πâ‡∏°‡∏•‡∏á localStorage ‡∏ï‡∏≤‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
  localStorage.setItem("points_" + user, points);

  document.getElementById("joinCount").innerText = joinCount;
  document.getElementById("missCount").innerText = missCount;
  document.getElementById("pointCount").innerText = points.toFixed(1);
}



// ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏î
document.getElementById("loginBtn").onclick = ()=> location.href="login.html";
document.getElementById("logoutBtn").onclick = ()=> { logout(); location.reload(); }

updateLoginUI();
</script>


</body>
</html>
______________________________________________________________________________
tam.html
<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
<title>‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡∏Å‡πÅ‡∏ï‡πâ‡∏°</title>
<style>
body { font-family: Kanit, sans-serif; background: #f5f7fa; padding-top: 70px; }
.container { width: 700px; background: #ffffff; padding: 25px; border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.15); text-align: center; }
h1, h2 { color: #002b6b; }
.card { border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; border-radius: 5px; }
button { padding: 5px 10px; margin-top: 5px; }
.logo-school { width: 50px; height:auto; margin-left:10px; }
.Font { font-size: 26px; color:white !important; font-weight: 600; }
@media (max-width:600px) {
  .container { width:100%; border-radius:0; box-shadow:none; }
}
</style>
</head>
<body>


<nav class="navbar navbar-dark bg-dark fixed-top">
  <div class="container-fluid">
    <div class="Font">
      <img src="img/‡∏ï‡∏£‡∏≤.png" class="logo-school">
      ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô
    </div>
    <div class="d-flex align-items-center">
      <span id="userText" class="text-white me-2"></span>
      <button id="loginBtn" class="btn btn-success btn-sm">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
      <button class="navbar-toggler" id="menuBtn" style="display:none;" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDarkNavbar">
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>

    
    <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasDarkNavbar">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
      </div>
      <div class="offcanvas-body">
        <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
          <li class="nav-item">
            <a class="nav-link active">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</a>
          </li>
          <ol class="list-group list-group-numbered">
            <li class="list-group-item d-flex justify-content-between align-items-start">
              <div class="ms-2 me-auto">
                <div class="fw-bold">‡∏Ç‡∏≤‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</div>
                ‡∏Ç‡∏≤‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î : <span id="missCount">0</span>
              </div>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-start">
              <div class="ms-2 me-auto">
                <div class="fw-bold">‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</div>
                ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î : <span id="joinCount">0</span>
              </div>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-start">
              <div class="ms-2 me-auto">
                <div class="fw-bold">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏∞‡∏™‡∏°/‡πÅ‡∏ï‡πâ‡∏°‡∏™‡∏∞‡∏™‡∏°</div>
                ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏∞‡∏™‡∏° : <span id="pointCount">0</span>
              </div>
            </li>
            <li class="nav-item mt-2">
              <a class="nav-link" href="tam.html">‡πÅ‡∏•‡∏Å‡πÅ‡∏ï‡πâ‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏¥‡∏ï‡∏û‡∏¥‡∏™‡∏±‡∏¢</a>
            </li>
            <li class="nav-item">
              <a id="logoutBtn" class="nav-link" href="#">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
            </li>
          </ol>
        </ul>
      </div>
    </div>
  </div>
</nav>

<br><br><br>

<div class="container main-container">

<h1>‡πÅ‡∏•‡∏Å‡πÅ‡∏ï‡πâ‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏¥‡∏ï‡∏û‡∏¥‡∏™‡∏±‡∏¢</h1>
<h5 style="opacity: 0.5;">1 ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° = 0.5 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h5>
<h3>‡πÅ‡∏ï‡πâ‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: <span id="points">0</span> ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h3>

<hr>

<h2 >‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ä‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏Å‡πÑ‡∏î‡πâ</h2>
<div class="card">
    <strong style="text-align: left;">‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ö‡∏£‡∏ô‡∏î‡πå‡∏ò‡∏∏‡∏à‡∏Å‡∏¥‡∏à‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•</strong> 
    <div style="text-align: left;">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏Å = 1</div>
    <button onclick="redeem('‡πÅ‡∏Å‡πâ‡∏ß‡∏ô‡πâ‡∏≥', 1)">‡πÅ‡∏•‡∏Å</button>
</div>
<div class="card">
    <strong style="text-align: left;">‡∏ô‡∏±‡∏ô‡∏ó‡∏ô‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏Ø</strong> 
    <div style="text-align: left;">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏Å = 1</div>
    <button onclick="redeem('‡πÅ‡∏Å‡πâ‡∏ß‡∏ô‡πâ‡∏≥', 1)">‡πÅ‡∏•‡∏Å</button>
</div>
<div id="subjectContainer"></div>
<hr>

<h2>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏Å</h2>
<ul id="history"></ul>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function() {

    const student = localStorage.getItem("student");

    if(!student){
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô");
        location.href = "index.html";
        return;
    }

    // ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏ô navbar
    document.getElementById("userText").innerText = "üëã " + student;
    document.getElementById("loginBtn").style.display = "none";
    document.getElementById("menuBtn").style.display = "inline-block";

    // ========== ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° ==========  
    const regs = JSON.parse(localStorage.getItem("registrations") || "{}");
    const missed = JSON.parse(localStorage.getItem("missedEvents") || "{}");

    let joinCount = 0;
    Object.keys(regs).forEach(date=>{
        regs[date].forEach(r=>{
            if(r.startsWith(student + "_")) joinCount++;
        });
    });

    // ========== ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ï‡πâ‡∏°‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà (‡πÄ‡∏Å‡πá‡∏ö‡∏à‡∏£‡∏¥‡∏á) ==========
    const pointKey = "points_" + student; 
    let points = parseFloat(localStorage.getItem(pointKey));

    if(isNaN(points)){
        points = joinCount * 0.5;
        localStorage.setItem(pointKey, points);
    }

    document.getElementById("points").innerText = points;

    // ========== ‡πÇ‡∏´‡∏•‡∏î‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ ==========
    const historyKey = "history_" + student;
    const history = JSON.parse(localStorage.getItem(historyKey) || "[]");

    const historyDisplay = document.getElementById("history");
    historyDisplay.innerHTML = "";
    history.forEach(item=>{
        const li = document.createElement("li");
        li.textContent = `${item.date} - ‡πÅ‡∏•‡∏Å: ${item.reward} (-${item.cost} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)`;
        historyDisplay.appendChild(li);
    });

    // ========== ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ä‡∏≤‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô ==========
    const subjectContainer = document.getElementById("subjectContainer");
    function renderSubjects(){
        subjectContainer.innerHTML = "";
        const subjects = JSON.parse(localStorage.getItem("subjects") || "[]");
        if(subjects.length === 0){
            subjectContainer.innerHTML = "<p class='text-muted'>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ß‡∏¥‡∏ä‡∏≤‡πÉ‡∏´‡πâ‡πÅ‡∏•‡∏Å</p>";
        } else {
            subjects.forEach(s => {
                const code = s.code || s.subjectCode || "‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏";
                const card = document.createElement("div");
                card.className = "card";
                card.innerHTML = `
                    <strong style="text-align: left;">${s.name} (${code})</strong>
                    <div style="text-align: left;">| ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏Å = ${s.points}</div>
                    <button onclick="redeem('${s.name}', ${s.points})" ${points < s.points ? 'disabled' : ''}>‡πÅ‡∏•‡∏Å</button>
                `;
                subjectContainer.appendChild(card);
            });
        }
    }

    renderSubjects(); // ‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏´‡∏ô‡πâ‡∏≤

    // ========== ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡πà‡∏ô‡πÅ‡∏•‡∏Å‡πÅ‡∏ï‡πâ‡∏° ==========
    window.redeem = function(reward, cost){
        if(points < cost){
            alert("‡πÅ‡∏ï‡πâ‡∏°‡πÑ‡∏°‡πà‡∏û‡∏≠!");
            return;
        }

        points -= cost;
        localStorage.setItem(pointKey, points);
        document.getElementById("points").innerText = points;

        const entry = { reward, cost, date: new Date().toLocaleString() };
        history.push(entry);
        localStorage.setItem(historyKey, JSON.stringify(history));

        alert(`‡πÅ‡∏•‡∏Å "${reward}" ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!`);

        const li = document.createElement("li");
        li.textContent = `${entry.date} - ‡πÅ‡∏•‡∏Å: ${reward} (-${cost} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô)`;
        historyDisplay.appendChild(li);

        renderSubjects(); // ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏¥‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏•‡∏Å‡∏ñ‡πâ‡∏≤‡πÅ‡∏ï‡πâ‡∏°‡πÑ‡∏°‡πà‡∏û‡∏≠
    }

    // ========== Sidebar ==========
    let missCount = Object.keys(missed).filter(k => k.startsWith(student + "_")).length;

    document.getElementById("joinCount").innerText = joinCount;
    document.getElementById("missCount").innerText = missCount;
    document.getElementById("pointCount").innerText = points;

    // ========== Logout ==========
    document.getElementById("logoutBtn").onclick = ()=>{
        localStorage.removeItem("student");
        location.href = "index.html";
    }

    // ========== ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏¥‡∏ä‡∏≤ ==========
    window.addEventListener("storage", function(e){
        if(e.key === "subjects"){
            renderSubjects();
        }
    });

});
</script>





</body>
</html> 
______________________________________________________________________________
login.html
<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢</title>
<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body {
  background: linear-gradient(135deg, #004aad, #00b4db);
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: "Kanit", sans-serif;
}
.container {
  background: #fff;
  padding: 30px;
  border-radius: 15px;
  width: 350px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.2);
  text-align: center;
}
h3 {
  font-weight: 700;
  color: #004aad;
}
input {
  margin-top: 10px;
}
button {
  margin-top: 20px;
  width: 100%;
  font-weight: 600;
}
.logo {
  width: 90px;
  margin-bottom: 15px;
}
</style>
</head>
<body>

<div class="container">
  <img src="img/‡∏ï‡∏£‡∏≤.png" class="logo" alt="‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢">
  <h3>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢</h3>
  <input id="username" type="text" class="form-control" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ">
  <input id="password" type="password" class="form-control" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
  <button class="btn btn-primary" onclick="login()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
  <a href="index.html" class="btn btn-outline-secondary mt-2 w-100">‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö)</a>
</div>
<script src="auth.js"></script>
<script>
// ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÅ‡∏¢‡∏Å Role
function login(){
  const user = document.getElementById("username").value.trim();
  const pass = document.getElementById("password").value.trim();

  // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á
  if(user === "‡∏Ç‡πâ‡∏≤‡∏ß‡∏õ‡∏∏‡πà‡∏ô" && pass === "1111"){
    localStorage.setItem("student", "‡∏Ç‡πâ‡∏≤‡∏ß‡∏õ‡∏∏‡πà‡∏ô");
    alert("‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à üéâ");
    window.location.href = "index.html";
  }
  else if(user === "admin" && pass === "8888"){
    localStorage.setItem("adminLogin", "true");
    alert("‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à üßë‚Äçüè´");
    window.location.href = "admin.html";
  }
  else{
    alert("‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‚ùå");
  }
}
</script>

</body>
</html>
______________________________________________________________________________
admin.html
<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° (Admin)</title>
<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body { background: #f8f8f8; font-family: "Kanit", sans-serif; padding: 40px 0; }
.container { max-width: 650px; background: #fff; padding: 25px; border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.1); margin-bottom: 40px; }
h3 { text-align: center; font-weight: 600; color: #002b6b; margin-bottom: 20px; }
.list-group-item { display: flex; justify-content: space-between; align-items: center; }
button { font-family: "Kanit", sans-serif; }
.logo-school { width: 50px; height:auto; margin-left:10px; }
.Font { font-size: 26px; color:white !important; font-weight: 600; }
.gap-2 > * { flex: 1; }
</style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-dark bg-dark fixed-top">
  <div class="container-fluid">
    <div class="Font">
      <img src="img/‡∏ï‡∏£‡∏≤.png" class="logo-school">
      ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô
    </div>
    <div class="d-flex align-items-center">
      <span id="userText" class="text-white me-2"></span>
      <button class="btn btn-danger btn-sm" onclick="adminLogout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
      <button class="navbar-toggler" id="menuBtn" style="display:none;" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDarkNavbar">
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </div>
</nav>

<br><br><br>

<!-- ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏•‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î -->
<div class="container d-flex gap-2">
  <button id="modeActivity" class="btn btn-primary">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</button>
  <button id="modeSubject" class="btn btn-secondary">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏¥‡∏ä‡∏≤</button>
</div>

<!-- ‡πÅ‡∏ú‡∏á Login -->
<div class="container" id="adminLogin">
  <h3>üõ† ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° (Admin)</h3>
  <hr>
  <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
  <input id="adminUser" class="form-control mb-2" placeholder="admin">
  <label class="form-label">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
  <input id="adminPass" type="password" class="form-control mb-2" placeholder="8888">
  <button class="btn btn-primary w-100 mt-3" onclick="adminLogin()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
  <a href="index.html" class="btn btn-outline-secondary w-100 mt-2">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
</div>

<!-- ‡πÅ‡∏ú‡∏á‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° -->
<div class="container" id="adminPanel" style="display:none;">
  <h5 class="fw-bold mb-3">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà</h5>
  <input id="eventTitle" class="form-control mb-2" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°">
  <input id="eventDate" type="date" class="form-control mb-2">
  <div class="d-flex gap-2 mb-2">
    <input id="eventStart" type="time" class="form-control">
    <input id="eventEnd" type="time" class="form-control">
  </div>
  <select id="eventMode" class="form-select mb-3">
    <option value="register">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</option>
    <option value="notify">‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå</option>
  </select>
  <button class="btn btn-success w-100 mb-3" onclick="addEvent()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</button>

  <hr>
  <h5 class="fw-bold mb-2">üìÖ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h5>
  <ul id="eventList" class="list-group"></ul>
</div>

<!-- ‡πÅ‡∏ú‡∏á‡∏ß‡∏¥‡∏ä‡∏≤ -->
<div class="container" id="subjectPanel" style="display:none;">
  <h5 class="fw-bold mb-3">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏¥‡∏ä‡∏≤‡πÉ‡∏´‡∏°‡πà</h5>
  <input id="subjectName" class="form-control mb-2" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏ä‡∏≤">
  <input id="subjectCode" class="form-control mb-2" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ß‡∏¥‡∏ä‡∏≤">
  <input id="subjectPoints" type="number" class="form-control mb-2" placeholder="‡πÅ‡∏ï‡πâ‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ">
  <button class="btn btn-success w-100 mb-3" onclick="addSubject()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏¥‡∏ä‡∏≤</button>

  <hr>
  <h5 class="fw-bold mb-2">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ä‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h5>
  <ul id="subjectList" class="list-group"></ul>
</div>

<script src="storage.js"></script>
<script src="calendar.js"></script>
<script>
/* ======== ‡∏Å‡∏≤‡∏£‡∏™‡∏•‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î ======== */
const btnActivity = document.getElementById('modeActivity');
const btnSubject = document.getElementById('modeSubject');
const activityPanel = document.getElementById('adminPanel');
const subjectPanel = document.getElementById('subjectPanel');

btnActivity.addEventListener('click', () => {
  activityPanel.style.display = 'block';
  subjectPanel.style.display = 'none';
  btnActivity.classList.replace('btn-secondary','btn-primary');
  btnSubject.classList.replace('btn-primary','btn-secondary');
});

btnSubject.addEventListener('click', () => {
  activityPanel.style.display = 'none';
  subjectPanel.style.display = 'block';
  btnActivity.classList.replace('btn-primary','btn-secondary');
  btnSubject.classList.replace('btn-secondary','btn-primary');
});

/* ======== ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô ======== */
function adminLogin(){
  const user = document.getElementById('adminUser').value.trim();
  const pass = document.getElementById('adminPass').value.trim();
  if(user==="admin" && pass==="8888"){
    localStorage.setItem("adminLogin","true");
    document.getElementById("adminLogin").style.display="none";
    activityPanel.style.display="block";
    loadEvents();
  } else alert("‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‚ùå");
}

function adminLogout(){
  localStorage.removeItem("adminLogin");
  window.location.href = "login.html";
}

if(localStorage.getItem("adminLogin")==="true"){
  document.getElementById("adminLogin").style.display="none";
  activityPanel.style.display="block";
  loadEvents();
}

/* ======== ‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° ======== */
function addEvent(){
  const title = document.getElementById("eventTitle").value.trim();
  const date = document.getElementById("eventDate").value;
  const start = document.getElementById("eventStart").value;
  const end = document.getElementById("eventEnd").value;
  const mode = document.getElementById("eventMode").value;

  if(!title || !date || !start || !end){
    alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
    return;
  }

  const events = getEvents();
  if(!events[date]) events[date] = [];
  events[date].push({ title, start, end, mode });
  saveEvents(events);

  alert("‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚úÖ");

  document.getElementById("eventTitle").value="";
  document.getElementById("eventDate").value="";
  document.getElementById("eventStart").value="";
  document.getElementById("eventEnd").value="";
  document.getElementById("eventMode").value="register";

  loadEvents();
}

function loadEvents(){
  const events = getEvents();
  const list = document.getElementById("eventList");
  list.innerHTML="";

  const dates = Object.keys(events).sort();
  if(dates.length===0){
    list.innerHTML="<li class='list-group-item text-muted text-center'>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</li>";
    return;
  }

  dates.forEach(d=>{
    events[d].forEach((e,i)=>{
      const li = document.createElement("li");
      li.className="list-group-item";
      li.innerHTML=`
        <div>
          <strong>${d}</strong><br>
          ${e.title} (${e.start} - ${e.end}) [${e.mode==='register'?'‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô':'‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå'}]
        </div>
        <button class="btn btn-sm btn-outline-danger" onclick="deleteEvent('${d}', ${i})">‡∏•‡∏ö</button>
      `;
      list.appendChild(li);
    });
  });
}

function deleteEvent(date, idx){
  if(confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")){
    const events = getEvents();
    if(events[date]){
      events[date].splice(idx,1);
      if(events[date].length===0) delete events[date];
      saveEvents(events);
      loadEvents();
    }
  }
}

/* ======== ‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏¥‡∏ä‡∏≤ ======== */
function addSubject(){
  const name = document.getElementById('subjectName').value.trim();
  const code = document.getElementById('subjectCode').value.trim();
  const points = parseInt(document.getElementById('subjectPoints').value);

  if(!name || !code || isNaN(points)){
    alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
    return;
  }

  let subjects = JSON.parse(localStorage.getItem('subjects') || '[]');
  subjects.push({ name, code, points });
  localStorage.setItem('subjects', JSON.stringify(subjects));

  document.getElementById('subjectName').value='';
  document.getElementById('subjectCode').value='';
  document.getElementById('subjectPoints').value='';

  renderSubjects();
}

function renderSubjects(){
  const list = document.getElementById('subjectList');
  const subjects = JSON.parse(localStorage.getItem('subjects') || '[]');
  list.innerHTML = '';

  if(subjects.length === 0){
    list.innerHTML = "<li class='list-group-item text-center text-muted'>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ß‡∏¥‡∏ä‡∏≤</li>";
    return;
  }

  subjects.forEach((s,i)=>{
    const li = document.createElement('li');
    li.className="list-group-item d-flex justify-content-between align-items-center";
    li.innerHTML = `
      ${s.name} (${s.code}) - ‡πÉ‡∏ä‡πâ‡πÅ‡∏ï‡πâ‡∏° ${s.points}
      <button class="btn btn-sm btn-outline-danger" onclick="deleteSubject(${i})">‡∏•‡∏ö</button>
    `;
    list.appendChild(li);
  });
}

function deleteSubject(idx){
  if(confirm("‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ß‡∏¥‡∏ä‡∏≤‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?")){
    let subjects = JSON.parse(localStorage.getItem('subjects') || '[]');
    subjects.splice(idx,1);
    localStorage.setItem('subjects', JSON.stringify(subjects));
    renderSubjects();
  }
}

// ‡πÇ‡∏´‡∏•‡∏î‡∏ß‡∏¥‡∏ä‡∏≤‡∏ï‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏´‡∏ô‡πâ‡∏≤
renderSubjects();
</script>
</body>
</html>
______________________________________________________________________________
]
js =
[
auth.js
// auth.js ‚Äî ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô (localStorage)
function login() {
  const user = document.getElementById("user").value.trim();
  const pass = document.getElementById("pass").value.trim();

  // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏´‡∏±‡∏™‡∏à‡∏≥‡∏•‡∏≠‡∏á
  if (user === "student" && pass === "1234") {
    localStorage.setItem("student", user);
    alert("‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚úÖ");
    window.location.href = "index.html";
  } else {
    alert("‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‚ùå");
  }
}


function logout(){
  localStorage.removeItem('student');
  // refresh ‡∏´‡∏ô‡πâ‡∏≤ index ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï UI
  if(window.location.pathname.endsWith('index.html') || window.location.pathname === '/' ){
    window.location.reload();
  } else {
    window.location.href = 'index.html';
  }
}
______________________________________________________________________________
calendar.js
// calendar.js ‚Äî ‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏´‡∏•‡∏±‡∏Å (‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏î‡∏∑‡∏≠‡∏ô/‡∏ß‡∏±‡∏ô/‡πÄ‡∏ß‡∏•‡∏≤) + ‡∏ï‡∏£‡∏ß‡∏à login ‡∏Å‡πà‡∏≠‡∏ô‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô
let currentYear = new Date().getFullYear();
let selectedMonth = new Date().getMonth();
let selectedDate = null;

let events = getEvents(); // ‡∏à‡∏≤‡∏Å storage.js

// ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° ‡πÉ‡∏´‡πâ‡πÉ‡∏™‡πà‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
if (Object.keys(events).length === 0) {
  events[`${currentYear}-02-15`] = [
    { title: "‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡∏ö‡πâ‡∏≤‡∏ô‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢", start: "09:00", end: "12:00", mode: "register" },
    { title: "‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡πÄ‡∏ä‡πâ‡∏≤", start: "12:30", end: "13:00", mode: "notify" }
  ];
  events[`${currentYear}-03-10`] = [
    { title: "‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏±‡∏ö‡∏ô‡πâ‡∏≠‡∏á", start: "13:00", end: "16:00", mode: "register" }
  ];
  saveEvents(events);
}

// ===================== Helper =====================
function convertToBuddhistYear(year) {
  return year + 543;
}

const months = [
  "‡∏°.‡∏Ñ", "‡∏Å.‡∏û", "‡∏°‡∏µ.‡∏Ñ", "‡πÄ‡∏°.‡∏¢", "‡∏û.‡∏Ñ", "‡∏°‡∏¥.‡∏¢",
  "‡∏Å.‡∏Ñ", "‡∏™.‡∏Ñ", "‡∏Å.‡∏¢", "‡∏ï.‡∏Ñ", "‡∏û.‡∏¢", "‡∏ò.‡∏Ñ"
];

// ===================== Render ‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏µ/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô =====================
function renderYear() {
  const display = document.getElementById("yearDisplay");
  if (display) display.innerText = convertToBuddhistYear(currentYear);
}

function renderMonths() {
  let html = "";
  months.forEach((m, i) => {
    const hasEvent = Object.keys(events).some(date => {
      const [y, mo] = date.split("-").map(Number);
      return y === currentYear && mo - 1 === i;
    });
    html += `<button class="month-btn ${i === selectedMonth ? "active" : ""} ${hasEvent ? "month-has-event" : ""}" onclick="selectMonth(${i})">${m}</button>`;
  });
  document.getElementById("monthsContainer").innerHTML = html;
}

function selectMonth(m) {
  selectedMonth = m;
  renderMonths();
  renderDays();
}

// ===================== Render ‡∏™‡πà‡∏ß‡∏ô‡∏ß‡∏±‡∏ô =====================
function renderDays() {
  const daysContainer = document.getElementById("daysContainer");
  if (!daysContainer) return;

  daysContainer.innerHTML = "";
  const lastDay = new Date(currentYear, selectedMonth + 1, 0).getDate();

  for (let d = 1; d <= lastDay; d++) {
    const dateStr = `${currentYear}-${String(selectedMonth + 1).padStart(2, "0")}-${String(d).padStart(2, "0")}`;
    const isEvent = events[dateStr] ? "active" : "";
    daysContainer.innerHTML += `<button class="day-btn ${isEvent}" onclick="selectDay('${dateStr}')">${d}</button>`;
  }
}

// ===================== ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡πâ‡∏ô =====================
function selectDay(dateStr) {
  selectedDate = dateStr;
  const container = document.getElementById('eventInfo');
  container.innerHTML = "";

  const evs = events[dateStr];
  if (!evs) {
    container.innerText = "‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°";
    return;
  }

  const username = localStorage.getItem('student');
  const now = new Date();
  const [y, m, d] = dateStr.split("-").map(Number);
  let eventsArray = Array.isArray(evs) ? evs : [evs];

  eventsArray.forEach((ev, index) => {
    const [startHour, startMin] = (ev.start || "00:00").split(":").map(Number);
    const [endHour, endMin] = (ev.end || "23:59").split(":").map(Number);
    const eventStart = new Date(y, m - 1, d, startHour, startMin);
    const eventEnd = new Date(y, m - 1, d, endHour, endMin);

    // ‚úÖ ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô
    const regs = getRegistrations();
    const count = regs[dateStr]?.filter(k => k.endsWith(`_${index}`)).length || 0;

    let msg = "";
    let canRegister = false;

    if (ev.mode === "register") {
      if (now < eventStart) msg = "<span style='color:red;font-weight:bold;'>‚õî ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</span>";
      else if (now > eventEnd) msg = "<span style='color:gray;font-weight:bold;'>‚ùå ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</span>";
      else canRegister = true;
    } else { 
      msg = "<span style='color:#0056b3;font-weight:bold;'>üì¢ ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå</span>";
    }

    const wrapper = document.createElement("div");
    wrapper.style.marginBottom = "10px";
    wrapper.style.padding = "10px";
    wrapper.style.border = "1px solid #ccc";
    wrapper.style.borderRadius = "8px";
    wrapper.style.background = "#f1f4ff";

    wrapper.innerHTML = `
      <strong>üìå ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°:</strong> ${ev.title}<br>
      <strong>üïí ‡πÄ‡∏ß‡∏•‡∏≤:</strong> ${ev.start || '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏'} - ${ev.end || '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏'}<br>
      <strong>üë• ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡πâ‡∏ß:</strong> ${count} ‡∏Ñ‡∏ô<br>
      ${msg}
    `;

    // ===================== ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô =====================
    if (ev.mode === "register" && canRegister) {
      const btn = document.createElement("button");
      btn.innerText = (username && isRegistered(dateStr, username, index)) ? "‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚úÖ" : "‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°";
      btn.disabled = username && isRegistered(dateStr, username, index);
      btn.style.backgroundColor = username && isRegistered(dateStr, username, index) ? "#28a745" : "#007bff";
      btn.style.color = "white";
      btn.style.border = "none";
      btn.style.padding = "6px 10px";
      btn.style.marginTop = "6px";
      btn.style.borderRadius = "6px";
      btn.style.cursor = btn.disabled ? "not-allowed" : "pointer";

      btn.onclick = () => {
        if (!username) {
          // ‚úÖ confirm + ‡πÄ‡∏î‡πâ‡∏á‡πÑ‡∏õ login
          if (confirm("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô")) {
            console.log("‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏î‡πâ‡∏á‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ login...");
            window.location.href = "login.html";
          }
          return;
        }

        const ok = register(dateStr, username, index);
        if (ok) {
          btn.innerText = "‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚úÖ";
          btn.disabled = true;
          btn.style.backgroundColor = "#28a745";
          btn.style.cursor = "not-allowed";
          if (typeof updateStats === "function") updateStats();
          alert("‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß ‚úÖ");
          selectDay(dateStr); // refresh ‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ô‡∏±‡∏ö‡∏Ñ‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
        } else {
          alert("‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÑ‡∏ß‡πâ‡πÅ‡∏•‡πâ‡∏ß");
        }
      };

      wrapper.appendChild(btn);
    }

    container.appendChild(wrapper);
  });
}

// ===================== ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô =====================
function register(date, username, idx = 0) {
  if (!date || !username) return false;
  const regs = getRegistrations();
  if (!regs[date]) regs[date] = [];
  if (!Array.isArray(regs[date])) regs[date] = [];
  const key = `${username}_${idx}`;
  if (!regs[date].includes(key)) {
    regs[date].push(key);
    saveRegistrations(regs);
    return true;
  }
  return false;
}

function isRegistered(date, username, idx = 0) {
  const regs = getRegistrations();
  if (!regs[date]) return false;
  const key = `${username}_${idx}`;
  return regs[date].includes(key);
}

// ===================== ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡∏µ =====================
function changeYear(delta) {
  currentYear += delta;
  renderYear();
  renderMonths();
  renderDays();
}

// ===================== ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏±‡∏ô =====================
renderYear();
renderMonths();
renderDays();
// ===================== ‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏±‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ =====================

// ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏î‡∏π
function checkMissedEvents() {
  const username = localStorage.getItem('student');
  if (!username) return;

  const regs = getRegistrations();
  const missed = JSON.parse(localStorage.getItem("missedEvents") || "{}");
  const now = new Date();

  Object.keys(events).forEach(date => {
    const [y, m, d] = date.split("-").map(Number);
    const dailyEvents = events[date];
    if (!Array.isArray(dailyEvents)) return;

    dailyEvents.forEach((ev, idx) => {
      if (ev.mode !== "register") return;
      const [endHour, endMin] = (ev.end || "23:59").split(":").map(Number);
      const eventEnd = new Date(y, m - 1, d, endHour, endMin);

      const key = `${username}_${date}_${idx}`;

      // ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏•‡∏∞‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô
      const isLate = now > eventEnd && !(regs[date]?.includes(`${username}_${idx}`));
      if (isLate && !missed[key]) {
        missed[key] = true;
      }
    });
  });

  localStorage.setItem("missedEvents", JSON.stringify(missed));
  if (typeof updateStats === "function") updateStats();
}

// ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤ index
checkMissedEvents();
______________________________________________________________________________
storage.js
// storage.js ‚Äî ‡πÄ‡∏Å‡πá‡∏ö events + registrations ‡πÉ‡∏ô localStorage
const KEY_EVENTS = "events";           // object: { "YYYY-MM-DD": [{title,start,end,mode}, ...] }
const KEY_REG = "registrations";       // object: { "YYYY-MM-DD": ["username_index", ...] }

function getEvents() {
  return JSON.parse(localStorage.getItem("events") || "{}");
}

function saveEvents(events) {
  localStorage.setItem("events", JSON.stringify(events));
}


function getRegistrations(){
  return JSON.parse(localStorage.getItem(KEY_REG) || "{}");
}

function saveRegistrations(r){
  localStorage.setItem(KEY_REG, JSON.stringify(r));
}

// ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô)
function register(date, username, idx = 0){
  if(!date || !username) return false;
  const regs = getRegistrations();
  if(!regs[date]) regs[date] = [];
  const key = `${username}_${idx}`;
  if(!regs[date].includes(key)){
    regs[date].push(key);
    saveRegistrations(regs);
    return true;
  }
  return false;
}

// ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤ user ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á
function isRegistered(date, username, idx = 0){
  const regs = getRegistrations();
  if(!regs[date]) return false;
  const key = `${username}_${idx}`;
  return regs[date].includes(key);
}
______________________________________________________________________________
]